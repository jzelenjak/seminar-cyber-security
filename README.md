# Seminar Cyber Security Scripts

This repository contains the scripts used for the Seminar Cyber Security course at TU Delft. I have analysed the ransom transactions from the [Ransomwhere](https://ransomwhe.re/) dataset, basing my work on the paper by Oosthoek et al. ([A Tale of Two Markets: Investigating the Ransomware Payments Economy](https://dl.acm.org/doi/10.1145/3582489)).

**NB! Ransomware is bad for security. Do NOT perform any ransomware attacks, even if you know what you are doing.**

## Setup

Download the [Ransomwhere](https://ransomwhe.re/) dataset. On the website, there is an option to download the data. Alternatively, you can run:

```bash
curl -sL "https://api.ransomwhe.re/export" | jq --indent 0 '.result' > data.json
```

## How to run

### Statistics on the dataset

The script for computing statistics on the dataset is [run\_stats.sh](./run_stats.sh). This script computes the general statistics, timeline of ransom transactions per year, timeline of ransom transactions per month, timeline of ransomware families per month and transaction and address count for a ransomware family of choice. The statistics are saved into a csv file. You can run the script as follows:

```bash
./run_stats.sh data.json
```

where `data.json` is the name of the downloaded JSON file from the Ransomwhere website.

You can use the script [compute\_top\_families.sh](./compute_top_families.sh) to find the top N families in terms of the number of transactions, the total payment sum in BTC and the total payment sum in USD. By default, top 15 families are computed, but you can change this number in the script.

### Plotting

There are a couple of Python scripts in this repository that can be used to visualize the computed statistics. Instructions on how to run are shown in the corresponding script. Some of the scripts require some csv file generated by `run_stats.sh` file as input. While the names are self-explanatory, below is a quick summary for each script.

You can use [plot\_months.py](plot_months.py) to plot the main monthly timeline of ransom transactions (the number of transactions, the payment sum in BTC and the payment sum in USD). The input file is `timeline_months.csv` computed by `run_stats.sh`.

The script [plot\_families.py](plot_families.py) can be used to plot the (monthly) timeline of ransomware families (the number of transactions, the payment sum in BTC and the payment sum in USD). For better readability, the families have been split based on the highest monthly sum in USD into three groups (small, medium, large). Since this might look a bit messy, there is also the script [plot\_top\_families.py](plot_top_families.py) which only plots the top 15 families in terms of the number of transactions, the payment sum in BTC and the payment sum in USD, taking the output of `compute_top_families.sh` as input. Note that the latter plotting script only computes one plot with the top families separately for each of the metrics (i.e. top 15 in the number of transactions, top 15 in the payment sum in BTC and top 15 in the payment sum in USD).

## Results

You can see the results of the scripts as of June 2024 in the [results/](./results/) directory:
- The directory [stats/](./results/stats/) contains (csv) files with the statistics (from the script `run_stats.sh`)
- The directory [plots/](./results/plots/) contains the plots from the plotting scripts (`plot_*.py` files)

## Acknowledgements

Many thanks to people asking and answering questions on Stackoverflow and people writing documentations and online tutorials. Your help has been invaluable.

Furthermore, I would like to thank Kris Oosthoek, Jack Cable and Georgios Smaragdakis for all their help and for the [Ransomwhere](https://ransomwhe.re/) dataset.

Note: 0 questions have been asked to ChatGPT (and other LLMs). The writing of the scripts has been a process of trial and error but it was also quite fun and I have learned a lot of new things (including 2d and 3d arrays in `awk` üôÇ and much more).

## Contributing

In case you have found a bug, feel free to create an issue or submit a Pull Request. We appreciate your efforts. ‚ù§Ô∏è
